{
  "comments": [
    {
      "key": {
        "uuid": "5a7ca5a3_5ba109f7",
        "filename": "ci/build_kernel_rpm_deb/Dockerfile",
        "patchSetId": 6
      },
      "lineNbr": 13,
      "author": {
        "id": 473
      },
      "writtenOn": "2016-07-11T18:09:05Z",
      "side": 1,
      "message": "I remember David suggest to build only deb, as he stated in \nhttps://gerrit.opnfv.org/gerrit/#/c/16001/, \"Since Fuel 9.0 (the deployment tool of OPNFV Colorado release) wouldn\u0027t support Centos in compute node, so fuel-plugin doesn\u0027t need *.rpm files, only need *.deb files. Building *.rpm files just waste time for this case. \". Seems this can\u0027t be achieved with this dockerfile?\n\nAlso, I\u0027m poor on docker, but curios if one docker file can run both debian package and rpm package? For example, can it run both the \u0027yum\u0027 and also the \u0027apt-get\u0027?",
      "revId": "a02092c3c38c69d22b77dd2641ec6f63e985b3aa",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a7ca5a3_db23d903",
        "filename": "ci/build_kernel_rpm_deb/Dockerfile",
        "patchSetId": 6
      },
      "lineNbr": 13,
      "author": {
        "id": 4441
      },
      "writtenOn": "2016-07-12T07:26:45Z",
      "side": 1,
      "message": "Hi Yunhong,\n\nThis docker file creates an ubuntu container, and builds both rpm and debian packages inside it.\n\nI guess David mentioned his comments for the fuel-plugin scripts, but I have placed these files in the \u0027ci\" sub-folder.\n\nBelow, were his comments-\n\" I would like to recommend that you first put your generic build script in other place (e.g. in ci subholder) and your generic build script should let caller to choose what files the caller needs (*.deb, *.rpm, or others for kernel case), and only build those files, so will not spend unnecessary time to build files that the caller doesn\u0027t need. \"\n\nPlease let me know if any modifications are required.",
      "parentUuid": "5a7ca5a3_5ba109f7",
      "revId": "a02092c3c38c69d22b77dd2641ec6f63e985b3aa",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a7ca5a3_3b9c4dc0",
        "filename": "ci/build_kernel_rpm_deb/README.txt",
        "patchSetId": 6
      },
      "lineNbr": 4,
      "author": {
        "id": 473
      },
      "writtenOn": "2016-07-11T18:09:05Z",
      "side": 1,
      "message": "I\u0027d suggest for the line wrap.",
      "revId": "a02092c3c38c69d22b77dd2641ec6f63e985b3aa",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a7ca5a3_5b7fc9e0",
        "filename": "ci/build_kernel_rpm_deb/README.txt",
        "patchSetId": 6
      },
      "lineNbr": 4,
      "author": {
        "id": 4441
      },
      "writtenOn": "2016-07-12T07:26:45Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5a7ca5a3_3b9c4dc0",
      "revId": "a02092c3c38c69d22b77dd2641ec6f63e985b3aa",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a7ca5a3_7b62c5d9",
        "filename": "ci/build_kernel_rpm_deb/build_deb_kvm.sh",
        "patchSetId": 6
      },
      "lineNbr": 18,
      "author": {
        "id": 473
      },
      "writtenOn": "2016-07-11T18:09:05Z",
      "side": 1,
      "message": "Why we don\u0027t apply these patches on the rpm build? A bit curios.",
      "revId": "a02092c3c38c69d22b77dd2641ec6f63e985b3aa",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a7ca5a3_7b4e45c3",
        "filename": "ci/build_kernel_rpm_deb/build_deb_kvm.sh",
        "patchSetId": 6
      },
      "lineNbr": 18,
      "author": {
        "id": 4441
      },
      "writtenOn": "2016-07-12T07:26:45Z",
      "side": 1,
      "message": "This deb_build script is being provided by the fuel-plugin and we are reusing the same pattern here.\n\nPlease let me know if I should change it for package application and make both the files similar as well.",
      "parentUuid": "5a7ca5a3_7b62c5d9",
      "revId": "a02092c3c38c69d22b77dd2641ec6f63e985b3aa",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a7ca5a3_89ee72eb",
        "filename": "ci/build_kernel_rpm_deb/build_deb_kvm.sh",
        "patchSetId": 6
      },
      "lineNbr": 18,
      "author": {
        "id": 473
      },
      "writtenOn": "2016-07-15T04:59:46Z",
      "side": 1,
      "message": "Hi, Swati\n    I\u0027d give a little bit more background here. Previously we have the kvm/ci/build.sh which is used to build the artifact by CI. Late, when we added the fuel plugin, as it\u0027s in the very late stage of the B release, fuel team created a patch to build the debian package.\n\n    So there are two building process and they does not match it. This will in the end bring trouble to us. As we discussed on the meeting, we should have only building utilities for both CI and fuel, although they may have their own wrapper if needed.\n\n   Just considering this patch. That means, if some patch on the $SRC/kvmfornfv/patches/, these patches will be integrated in the ISO built from fuel plugin debian package and used by the end user, but they are not tested on the rpm packages that is tested on the PoD machines. I think that\u0027s not good IMHO.",
      "parentUuid": "5a7ca5a3_7b4e45c3",
      "revId": "a02092c3c38c69d22b77dd2641ec6f63e985b3aa",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a7ca5a3_c95b0a53",
        "filename": "ci/build_kernel_rpm_deb/build_deb_kvm.sh",
        "patchSetId": 6
      },
      "lineNbr": 18,
      "author": {
        "id": 4441
      },
      "writtenOn": "2016-07-15T11:15:57Z",
      "side": 1,
      "message": "Hi Yunhong, for more clarity it will be good if we can discuss this offline.",
      "parentUuid": "5a7ca5a3_89ee72eb",
      "revId": "a02092c3c38c69d22b77dd2641ec6f63e985b3aa",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a7ca5a3_9b5fa10e",
        "filename": "ci/build_kernel_rpm_deb/build_rpm_kvm.sh",
        "patchSetId": 6
      },
      "lineNbr": 20,
      "author": {
        "id": 473
      },
      "writtenOn": "2016-07-11T18:09:05Z",
      "side": 1,
      "message": "So there is no such check on the deb package building?",
      "revId": "a02092c3c38c69d22b77dd2641ec6f63e985b3aa",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a7ca5a3_db519963",
        "filename": "ci/build_kernel_rpm_deb/build_rpm_kvm.sh",
        "patchSetId": 6
      },
      "lineNbr": 20,
      "author": {
        "id": 4441
      },
      "writtenOn": "2016-07-12T07:26:45Z",
      "side": 1,
      "message": "Hi Yunhong, \n\nHere, I am reusing the same kvmfornfv/ci/build.sh file existing in the tree, with slight modifications.\n\nAs per what is already available, there is no checking for the package. If you want, I can include that code.",
      "parentUuid": "5a7ca5a3_9b5fa10e",
      "revId": "a02092c3c38c69d22b77dd2641ec6f63e985b3aa",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a7ca5a3_fba57504",
        "filename": "ci/build_kernel_rpm_deb/build_rpm_package.sh",
        "patchSetId": 6
      },
      "lineNbr": 4,
      "author": {
        "id": 473
      },
      "writtenOn": "2016-07-11T18:09:05Z",
      "side": 1,
      "message": "why do we need the copy here?",
      "revId": "a02092c3c38c69d22b77dd2641ec6f63e985b3aa",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a7ca5a3_1b8951eb",
        "filename": "ci/build_kernel_rpm_deb/build_rpm_package.sh",
        "patchSetId": 6
      },
      "lineNbr": 4,
      "author": {
        "id": 4441
      },
      "writtenOn": "2016-07-12T07:26:45Z",
      "side": 1,
      "message": "Some parameters have been modified for the rpm_build.sh on the slave, which gets copied to the Docker container using Dockerfile. \nNow, its better to copy this changed file inside the same kvmfornfv/ci/ structure for similarity with the existing kvmfornfv tree code.",
      "parentUuid": "5a7ca5a3_fba57504",
      "revId": "a02092c3c38c69d22b77dd2641ec6f63e985b3aa",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a7ca5a3_29bb9ee6",
        "filename": "ci/build_kernel_rpm_deb/pre_build_hook",
        "patchSetId": 6
      },
      "lineNbr": 14,
      "author": {
        "id": 473
      },
      "writtenOn": "2016-07-15T04:59:46Z",
      "side": 1,
      "message": "so we will build both rpms and debian here?",
      "revId": "a02092c3c38c69d22b77dd2641ec6f63e985b3aa",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a7ca5a3_49505a32",
        "filename": "ci/build_kernel_rpm_deb/pre_build_hook",
        "patchSetId": 6
      },
      "lineNbr": 14,
      "author": {
        "id": 4441
      },
      "writtenOn": "2016-07-15T11:15:57Z",
      "side": 1,
      "message": "Yes Yunhong, this will build both rpms and debs in ubuntu docker (by running the scripts mentioned in the Dockerfile).\n\nAfter building both of them,they will be copied to the host.",
      "parentUuid": "5a7ca5a3_29bb9ee6",
      "revId": "a02092c3c38c69d22b77dd2641ec6f63e985b3aa",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    }
  ]
}